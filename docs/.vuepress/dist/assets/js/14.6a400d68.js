(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{363:function(t,e,s){"use strict";s.r(e);var a=s(42),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"idempotent-desktop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#idempotent-desktop"}},[t._v("#")]),t._v(" Idempotent Desktop")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://github.com/ksevelyar/idempotent-desktop/workflows/build/badge.svg",alt:"Build Status"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/fWKORz4.png",alt:"screen"}}),t._v(" "),s("img",{attrs:{src:"https://i.imgur.com/fhAtYZY.png",alt:"screen"}}),t._v(" "),s("img",{attrs:{src:"/images/tomb.png",alt:"tomb"}})]),t._v(" "),s("h2",{attrs:{id:"docs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docs"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"https://idempotent-desktop.netlify.app/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docs"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("This repo is just a bunch of NixOS "),s("a",{attrs:{href:"https://github.com/ksevelyar/idempotent-desktop/tree/master/modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("modules"),s("OutboundLink")],1),t._v(", so you can pick or override anything.")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://idempotent-desktop.netlify.app/screenshots.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Other Screens"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"features"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#features"}},[t._v("#")]),t._v(" Features")]),t._v(" "),s("blockquote",[s("p",[t._v("Idempotence is the property of certain operations in mathematics and computer science whereby they can be applied multiple times without changing the result beyond the initial application.")])]),t._v(" "),s("h3",{attrs:{id:"agnostic-de-without-actual-de"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#agnostic-de-without-actual-de"}},[t._v("#")]),t._v(" Agnostic DE without actual DE")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("xmonad")]),t._v(", "),s("code",[t._v("polybar")]),t._v(", "),s("code",[t._v("rofi")]),t._v(", "),s("code",[t._v("dunst")]),t._v(", "),s("code",[t._v("tmux")]),t._v(", "),s("code",[t._v("lxqt-policykit")]),t._v(", and friends")]),t._v(" "),s("li",[t._v("Opimised for both touch typing and mouse")]),t._v(" "),s("li",[t._v("Unified look for gtk and qt with "),s("code",[t._v("ant-dracula")]),t._v(" theme")]),t._v(" "),s("li",[t._v("Effective usage of resources, requires "),s("strong",[t._v("less than 500MB RAM")]),t._v(" to boot to the graphical user interface")]),t._v(" "),s("li",[t._v("Install system with all you preferences using three commands")]),t._v(" "),s("li",[t._v("Docs awailable on "),s("a",{attrs:{href:"http://docs.lcl",target:"_blank",rel:"noopener noreferrer"}},[t._v("docs.lcl"),s("OutboundLink")],1),t._v(" or by pressing "),s("code",[t._v("win+h")])])]),t._v(" "),s("h3",{attrs:{id:"friendly-for-developers-and-diy-enthusiasts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#friendly-for-developers-and-diy-enthusiasts"}},[t._v("#")]),t._v(" Friendly for developers and DIY enthusiasts")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("elixir")]),t._v(", "),s("code",[t._v("node")]),t._v(", "),s("code",[t._v("rust")]),t._v(" nix-shell environments")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("mongodb")]),t._v(", "),s("code",[t._v("postgresql")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("docker")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("arduino-ide")]),t._v(", "),s("code",[t._v("esptool.py")]),t._v(", "),s("code",[t._v("fritzing")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("openscad")]),t._v(", "),s("code",[t._v("prusa-slicer")])])])]),t._v(" "),s("h3",{attrs:{id:"cli-tools"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cli-tools"}},[t._v("#")]),t._v(" CLI Tools")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("fish")]),t._v(", "),s("code",[t._v("alacritty")])]),t._v(" "),s("li",[s("code",[t._v("fd")]),t._v(", "),s("code",[t._v("rg")]),t._v(", "),s("code",[t._v("fzf")]),t._v(", "),s("code",[t._v("delta")]),t._v(", "),s("code",[t._v("bat")])]),t._v(" "),s("li",[s("code",[t._v("jq")])]),t._v(" "),s("li",[s("code",[t._v("hunter")]),t._v(", "),s("code",[t._v("ncdu")]),t._v(", "),s("code",[t._v("zoxide")])]),t._v(" "),s("li",[s("code",[t._v("tealdeer")])]),t._v(" "),s("li",[s("code",[t._v("ddgr")]),t._v(", "),s("code",[t._v("googler")])]),t._v(" "),s("li",[s("code",[t._v("imv")]),t._v(", "),s("code",[t._v("mpv")]),t._v(", "),s("code",[t._v("viu")]),t._v(", "),s("code",[t._v("moc")])])]),t._v(" "),s("h3",{attrs:{id:"nixos"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nixos"}},[t._v("#")]),t._v(" NixOS")]),t._v(" "),s("ul",[s("li",[t._v("Describe your sysem before installation with text files and put them to git")]),t._v(" "),s("li",[t._v("Automatic backups after each rebuild")]),t._v(" "),s("li",[t._v("Autotest all your hosts with Cachix and "),s("a",{attrs:{href:"https://github.com/ksevelyar/idempotent-desktop/blob/master/.github/workflows/build.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("CI"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"security"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security"}},[t._v("#")]),t._v(" Security")]),t._v(" "),s("ul",[s("li",[t._v("Use master password with "),s("code",[t._v("gopass")]),t._v(" and integrate it to "),s("a",{attrs:{href:"https://addons.mozilla.org/en-US/firefox/addon/browserpass-ce/",target:"_blank",rel:"noopener noreferrer"}},[t._v("browser"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Keep your secrets in "),s("code",[t._v("tomb")])]),t._v(" "),s("li",[t._v("See info about "),s("code",[t._v("sshd")]),t._v(" and "),s("code",[t._v("x11vnc")]),t._v(" connects in "),s("code",[t._v("polybar")])])]),t._v(" "),s("h3",{attrs:{id:"anonimity"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#anonimity"}},[t._v("#")]),t._v(" Anonimity")]),t._v(" "),s("ul",[s("li",[t._v("Tor Browser Bundle and "),s("code",[t._v("onionshare")])]),t._v(" "),s("li",[t._v("Tor as socks5 proxy for Telegram Desktop and Firefox.")]),t._v(" "),s("li",[s("code",[t._v("openvpn")]),t._v(" with "),s("code",[t._v("update-resolv-conf")]),t._v(" (tested with "),s("a",{attrs:{href:"https://protonvpn.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("protonvpn.com"),s("OutboundLink")],1),t._v(")")]),t._v(" "),s("li",[s("code",[t._v("wireguard")]),t._v(", "),s("code",[t._v("i2p")])])]),t._v(" "),s("h3",{attrs:{id:"proprietary-suite"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#proprietary-suite"}},[t._v("#")]),t._v(" Proprietary suite")]),t._v(" "),s("p",[t._v("Steam, Spotify, Slack, Upwork and others if you need them.")]),t._v(" "),s("h3",{attrs:{id:"games"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#games"}},[t._v("#")]),t._v(" Games")]),t._v(" "),s("p",[s("code",[t._v("games.nix")]),t._v(" includes opendune, dwarf-fortress, rogue, nethack, stepmania, wesnoth and wine")]),t._v(" "),s("h3",{attrs:{id:"hackable-live-usb-💾"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hackable-live-usb-💾"}},[t._v("#")]),t._v(" Hackable Live Usb 💾")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://idempotent-desktop.netlify.app/live-usb.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Build"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://drive.google.com/file/d/1XBa1LUK32A_DbMBge44co_AFfg44Ngqo/view?usp=sharing",target:"_blank",rel:"noopener noreferrer"}},[t._v("Or Download"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"quick-install"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#quick-install"}},[t._v("#")]),t._v(" Quick install")]),t._v(" "),s("p",[t._v("Boot from live-usb. You can prepare drives with "),s("code",[t._v("gparted")]),t._v(" ("),s("code",[t._v("Win")]),t._v(" for app launcher).")]),t._v(" "),s("h3",{attrs:{id:"internet"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#internet"}},[t._v("#")]),t._v(" Internet")]),t._v(" "),s("p",[t._v("Internet connection is required.")]),t._v(" "),s("p",[t._v("You can connect to wi-fi with "),s("code",[t._v("nmtui")]),t._v(" from terminal ("),s("code",[t._v("Win+Enter")]),t._v(" for terminal)")]),t._v(" "),s("h3",{attrs:{id:"mount-drives-efi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mount-drives-efi"}},[t._v("#")]),t._v(" Mount drives (EFI)")]),t._v(" "),s("div",{staticClass:"language-fish extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("mount /dev/disk/by-label/nixos /mnt\nmount /dev/disk/by-label/boot  /mnt/boot\n\n")])])]),s("h3",{attrs:{id:"clone-repo-to-mnt-etc-nixos"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#clone-repo-to-mnt-etc-nixos"}},[t._v("#")]),t._v(" Clone repo to /mnt/etc/nixos")]),t._v(" "),s("div",{staticClass:"language-fish extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo git clone https://github.com/ksevelyar/idempotent-desktop.git /mnt/etc/nixos\n")])])]),s("h3",{attrs:{id:"link-your-machine"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#link-your-machine"}},[t._v("#")]),t._v(" Link your machine")]),t._v(" "),s("div",{staticClass:"language-fish extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd /mnt/etc/nixos\nln -s hosts/hk47.nix configuration.nix\n")])])]),s("h3",{attrs:{id:"install"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install"}},[t._v("#")]),t._v(" Install")]),t._v(" "),s("div",{staticClass:"language-fish extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo nixos-install\n")])])]),s("p",[t._v("NixOS will ask root password on successful installation")]),t._v(" "),s("h3",{attrs:{id:"finalize-user"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#finalize-user"}},[t._v("#")]),t._v(" Finalize user")]),t._v(" "),s("p",[t._v("Set password and correct rights to /etc/nixos for your user:")]),t._v(" "),s("div",{staticClass:"language-fish extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo passwd username\nsudo chown 1000:1000 /mnt/etc/nixos\n")])])]),s("p",[t._v("Now you can reboot to your system with "),s("code",[t._v("reboot")]),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"more-verbose-installation-with-new-host-and-user-generation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#more-verbose-installation-with-new-host-and-user-generation"}},[t._v("#")]),t._v(" More verbose installation with new host and user generation")]),t._v(" "),s("p",[t._v("Physical machines locates in "),s("code",[t._v("hosts")]),t._v("; users in "),s("code",[t._v("users")]),t._v(". You'll need to link your host to configuration.nix and rebuild system.")]),t._v(" "),s("p",[t._v("Example of fresh installation from "),s("code",[t._v("live-usb")]),t._v(":")]),t._v(" "),s("h3",{attrs:{id:"clone-repo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#clone-repo"}},[t._v("#")]),t._v(" Clone repo")]),t._v(" "),s("p",[s("code",[t._v("sudo git clone https://github.com/ksevelyar/idempotent-desktop.git /mnt/etc/nixos")])]),t._v(" "),s("h3",{attrs:{id:"create-new-user"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-new-user"}},[t._v("#")]),t._v(" Create new user")]),t._v(" "),s("p",[s("code",[t._v("nvim /mnt/etc/nixos/users/new-user.nix")])]),t._v(" "),s("p",[t._v("You can use "),s("a",{attrs:{href:"https://github.com/ksevelyar/idempotent-desktop/blob/master/users/ksevelyar.nix",target:"_blank",rel:"noopener noreferrer"}},[t._v("ksevelyar.nix"),s("OutboundLink")],1),t._v(" as reference.")]),t._v(" "),s("h3",{attrs:{id:"generate-configs-and-merge-them-to-new-host"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#generate-configs-and-merge-them-to-new-host"}},[t._v("#")]),t._v(" Generate configs and merge them to new host")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" nixos-generate-config --root /mnt\nbat /mnt/etc/nixos/*.nix\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" /mnt/etc/nixos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(",.bak"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nnvim /mnt/etc/nixos/hosts/new-host.nix\n\n")])])]),s("p",[t._v("You can use "),s("a",{attrs:{href:"https://github.com/ksevelyar/idempotent-desktop/blob/master/hosts/hk47.nix",target:"_blank",rel:"noopener noreferrer"}},[t._v("hk47.nix"),s("OutboundLink")],1),t._v(" as reference.")]),t._v(" "),s("h3",{attrs:{id:"install-nixos"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install-nixos"}},[t._v("#")]),t._v(" Install nixos")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" nixos-install\n")])])]),s("p",[t._v("You should see prompt for root password in the end.")]),t._v(" "),s("h3",{attrs:{id:"scripts-and-aliases-can-save-some-time"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scripts-and-aliases-can-save-some-time"}},[t._v("#")]),t._v(" Scripts and aliases can save some time")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/ksevelyar/idempotent-desktop/blob/master/modules/sys/scripts.nix",target:"_blank",rel:"noopener noreferrer"}},[t._v("scripts.nix"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/ksevelyar/idempotent-desktop/blob/master/modules/sys/aliases.nix",target:"_blank",rel:"noopener noreferrer"}},[t._v("aliases.nix"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"todo-🍒"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#todo-🍒"}},[t._v("#")]),t._v(" Todo 🍒")]),t._v(" "),s("ul",{staticClass:"contains-task-list"},[s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{disabled:"",type:"checkbox"}}),t._v(" Live Usb with persistence layer")]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{disabled:"",type:"checkbox"}}),t._v(" Write docs\n"),s("ul",{staticClass:"contains-task-list"},[s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{disabled:"",type:"checkbox"}}),t._v(" Русская документация")]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{disabled:"",type:"checkbox"}}),t._v(" Add animated svgs to docs")]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",disabled:"",type:"checkbox"}}),t._v(" Find dark theme for vuepress")])])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{disabled:"",type:"checkbox"}}),t._v(" Declarative Node packages")]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{disabled:"",type:"checkbox"}}),t._v(" Declarative secrets")]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{disabled:"",type:"checkbox"}}),t._v(" Pack "),s("a",{attrs:{href:"https://github.com/Kethku/neovide",target:"_blank",rel:"noopener noreferrer"}},[t._v("Neovide"),s("OutboundLink")],1)]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{disabled:"",type:"checkbox"}}),t._v(" semantic versioning")])])])}),[],!1,null,null,null);e.default=r.exports}}]);